/**
 * knapp.js - version 1.3.1
 *
 * https://github.com/bcorreia/knapp.js.git
 * Bruno Correia - mail@bcorreia.com
 *
 */
var Knapp=function(){"use strict";function a(a,b){var c=Object.create(a);return Object.keys(b).map(function(a){a in c&&(c[a]=b[a])}),c}function b(b,e){var f=Object.create(d,{settings:{value:a(c,e||{})},elements:{value:{},writable:!0},data:{value:[],writable:!0}});f.init(b);var g={add:function(a){a.forEach(function(a,b){f.data.push(a)})}};return g}var c={selected:0,onReady:function(){},onSelect:function(){},onChange:function(){},onComplete:function(){}},d={init:function(a){var b=this.elements,c=a.parentNode||document.querySelector(".knapp-stage");if(a.nodeName)for(var d=0;d<a.children.length;d+=1)this.data[d]={name:a.children[d].innerHTML,action:a.children[d].getAttribute("data-knapp"),classlist:a.children[d].getAttribute("class")};else for(var d=0;d<a.length;d+=1)this.data[d]={name:a[d].name,action:a[d].action,classlist:a[d].classlist};["knapp","stage","next","prev"].forEach(function(a,c){b[a]=document.createElement("div"),b[a].classList.add(a)}),b.stage.innerText=this.data[this.settings.selected].name,b.knapp.appendChild(b.stage),b.knapp.insertBefore(b.prev,b.knapp.childNodes[0]),b.knapp.appendChild(b.next),b.stage.classList.add(this.data[this.settings.selected].classlist),c.hasChildNodes()&&c.removeChild(a),c.appendChild(b.knapp),setTimeout(function(){this.settings.onReady()}.bind(this),0),this.addlisteners()},addlisteners:function(){var a=this.settings.selected,b=this.elements.knapp,c=this.elements.stage;b.addEventListener("click",function(b){switch(b.target.className.match(/\w*/)[0]){case"prev":a=0===a?this.data.length-1:a-=1,c.classList.add("transition","-up"),this.settings.onChange();break;case"next":a=a===this.data.length-1?0:a+=1,c.classList.add("transition","-down"),this.settings.onChange();break;case"stage":this.action(a)}}.bind(this)),c.addEventListener("transitionend",function(b){var d=function(){var b=this.elements.stage;setTimeout(function(){b.className="",b.classList.add("stage",this.data[a].classlist,"transition"),b.style.transform="translateY(0)",b.removeAttribute("style"),this.update(a)}.bind(this),1)};b.target.className.match(/-up$/)&&(c.classList.remove("transition","-up"),c.style.transform="translateY(100%)",d.call(this)),b.target.className.match(/-down$/)&&(c.classList.remove("transition","-down"),c.style.transform="translateY(-100%)",d.call(this))}.bind(this))},update:function(a){var b=this.elements.stage;return b.innerText=this.data[a].name,this.settings.onComplete(this.data[a])},action:function(a){var b=this.data[a],c=new RegExp(/(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?/);b.action.match(c)?window.location.href=b.action:this.settings.onSelect(b)}};return b}();